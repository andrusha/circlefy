<?php
$res = $_t['edit_profile'];
$fname = $res['fname'];
$lname = $res['lname'];
$uname = $_SESSION['uname'];
$email = $res['email'];
$pic = $res['pic_180'];
$country = $res['country'];
$state = $res['state'];
$region = $res['region'];
$town = $res['town'];
$lang = $res['lang'];
$about = $res['about'];

$stat = $_t['stats'];
$message_count = $stat['message_count'];
$response_count = $stat['response_count'];
$group_count = $stat['group_count'];
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Language" content="EN" />
<meta name="ROBOTS" content="ALL" />
<meta name="Copyright" content="Copyright (c) 2009 TAP" />
<meta http-equiv="imagetoolbar" content="false" />
<meta name="description" content="TAP communication platform" />
<meta name="keywords" content="real-time, search, TAP, microblogging, communication platform" />
<title>tap - alpha</title>
<link rel="stylesheet" href="/views/style_sheets/global.css" type="text/css" />
<link rel="stylesheet" href="/views/style_sheets/profile.css" type="text/css" />
<link rel="shortcut icon" href="/images/cimages/favicon.ico" type="image/x-icon" />
<link rel="icon" href="/images/cimages/favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="/views/javascript/mootools-1.2.3-core-yc.js"></script>
<script type="text/javascript"src="/views/javascript/mootools-1.2.3.1-more.js"></script>
<script type="text/javascript" src="/views/javascript/mootools-tap.js"></script>
<script type="text/javascript" src="/views/javascript/mpmetrics.js"></script>
<script type="text/javascript"> try { mpmetrics.init('<?= METRIC_KEY ?>');} catch(err) { alert(err) } </script>
<script type="text/javascript">
Tap = window.Tap || {};
Tap.Vars = {
	country: "<?= $country ?>",
	region: "<?= $region ?>",
	state: "<?= $state ?>",
	town: "<?= $town ?>",
	lang: "<?= $lang ?>"
};
</script>
<script type="text/javascript" src="/views/javascript/tap.profile.js"></script>

<body>
	
	<? include(HEADER_CLEAN); ?>
	
	<div id="main">
		
		<div id="sidebar-left" class="sidebar">
			<div id="groups" class="section">
				<div class="section-head">
					<h1>Stats</h1>
				</div>
				<div class="section-body user-stats">
					<p><span><?= $message_count ?></span> taps from you.</p>
					<p><span><?= $response_count ?></span> responses received.</p>
					<p><span><?= $group_count ?></span> groups joined.</p>
				</div>
			</div>
		</div>
		
		<div id="content">
			
			<div id="profile" class="section">
				
				<div class="section-head big">
					<span class="tab" id="pass">Password</span>
					<span class="tab on" id="account">Your Account</span>
					<h1>
						<span>My Profile</span>
					</h1>
				</div>
				
				<div class="section-body info">
					<div id="youraccount" class="panel selected">
						<h1>About Me</h1><hr class="hr2"/>
						<h2 class="in-title">
							About: <input type="text" name="about" value="<?=$about?>" />
							<p>*For your public profile</p>
							<div class="error-msg"></div>
						</h2>

						<h1>Account</h1><hr class="hr2"/>
						<h2 class="in-title">
							Username: <input type="text" name="uname" disabled="disabled" value="<?= $uname ?>" />
							<div class="error-msg"></div>
						</h2>
						<h2 class="in-title">
							Email: <input type="text" name="email" value="<?= $email ?>" />
							<div class="error-msg"></div>
						</h2>
						<h2 class="in-title">
							Firstname: <input type="text" name="fname" value="<?= $fname ?>" />
							<div class="error-msg"></div>
						</h2>
						<h2 class="in-title">
							Lastname: <input type="text" name="lname" value="<?= $lname ?>" />
							<div class="error-msg"></div>
						</h2>
						<h2 class="in-title">
							Primary Language:
							<select name="language" style="margin-right:140px">
								<option value="English">English</option>
								<option value="Afrikaans">Afrikaans</option>
								<option value="Albanian">Albanian</option>
								<option value="Aragonese">Aragonese</option>
								<option value="Asturian">Asturian</option>
								<option value="Azeri">Azeri</option>
								<option value="Basque">Basque</option>
								<option value="Belarusian">Belarusian</option>
								<option value="Breton">Breton</option>
								<option value="Catalan">Catalan</option>
								<option value="Cebuano">Cebuano</option>
								<option value="Cornish">Cornish</option>
								<option value="Corsican">Corsican</option>
								<option value="Croatian">Croatian</option>
								<option value="Czech">Czech</option>
								<option value="Danish">Danish</option>
								<option value="Dutch">Dutch</option>
								<option value="English">English</option>
								<option value="Esperanto">Esperanto</option>
								<option value="Estonian">Estonian</option>
								<option value="Faroese">Faroese</option>
								<option value="Finnish">Finnish</option>
								<option value="French">French</option>
								<option value="Frisian">Frisian</option>
								<option value="Friulian">Friulian</option>
								<option value="Fula (Pulaar)">Fula (Pulaar)</option>
								<option value="Gaelic (Scottish)">Gaelic (Scottish)</option>
								<option value="Galician">Galician</option>
								<option value="German">German</option>
								<option value="Gikuyu">Gikuyu</option>
								<option value="Guaraní">Guaraní</option>
								<option value="Hausa">Hausa</option>
								<option value="Hawai'ian">Hawai'ian</option>
								<option value="Hungarian">Hungarian</option>
								<option value="Icelandic">Icelandic</option>
								<option value="Ido">Ido</option>
								<option value="Igbo">Igbo</option>
								<option value="Indonesian">Indonesian</option>
								<option value="Insubric">Insubric</option>
								<option value="Interlingua">Interlingua</option>
								<option value="Irish">Irish</option>
								<option value="Italian">Italian</option>
								<option value="Javanese">Javanese</option>
								<option value="Kikongo">Kikongo</option>
								<option value="Kinyarwanda">Kinyarwanda</option>
								<option value="Kirundi">Kirundi</option>
								<option value="Latin">Latin</option>
								<option value="Latvian">Latvian</option>
								<option value="Lingala">Lingala</option>
								<option value="Lithuanian">Lithuanian</option>
								<option value="Luganda">Luganda</option>
								<option value="Luxembourgish">Luxembourgish</option>
								<option value="Maori">Maori</option>
								<option value="Malay">Malay</option>
								<option value="Maltese">Maltese</option>
								<option value="Manx">Manx</option>
								<option value="Moldovan">Moldovan</option>
								<option value="Nahuatl (post Spanish Conquest)">Nahuatl (post Spanish Conquest)</option>
								<option value="Navaho or Navajo">Navaho or Navajo</option>
								<option value="Ndebele">Ndebele</option>
								<option value="Norwegian">Norwegian</option>
								<option value="Occitan">Occitan</option>
								<option value="Orobic">Orobic</option>
								<option value="Oromo">Oromo</option>
								<option value="Polish">Polish</option>
								<option value="Portuguese">Portuguese</option>
								<option value="Quechua">Quechua</option>
								<option value="Romanian">Romanian</option>
								<option value="Samoan">Samoan</option>
								<option value="Scots">Scots</option>
								<option value="Serbian">Serbian</option>
								<option value="Shona">Shona</option>
								<option value="Slovak">Slovak</option>
								<option value="Slovenian">Slovenian</option>
								<option value="Somali">Somali</option>
								<option value="Spanish">Spanish</option>
								<option value="Swahili">Swahili</option>
								<option value="Swedish">Swedish</option>
								<option value="Tagalog/Filipino">Tagalog/Filipino</option>
								<option value="Tahitian">Tahitian</option>
								<option value="Tatar">Tatar</option>
								<option value="Tongan">Tongan</option>
								<option value="Tswana">Tswana</option>
								<option value="Turkish">Turkish</option>
								<option value="Turoyo">Turoyo</option>
								<option value="Vietnamese">Vietnamese</option>
								<option value="Võro">Võro</option>
								<option value="Walloon">Walloon</option>
								<option value="Welsh">Welsh</option>
								<option value="Wolof">Wolof</option>
								<option value="Xhosa">Xhosa</option>
								<option value="Yoruba">Yoruba</option>
								<option value="Zulu">Zulu</option>
							</select>
							<div class="error-msg"></div>
						</h2>
						<br /><br />
						<h1>Location </h1><hr class="hr2"/>
						<h2 class="in-title">Country:
							<select name="country" style="margin-right:140px">
								<? foreach ( $_t['init_geo_data'] as $item): ?>
								<option
									value="<?= $item['abbr2'] ?>"
									style="background: url(images/geo_pics/gif/<?= strtolower($item['abbr2']) ?>.gif) no-repeat 3% center; padding: 5px; padding-left: 30px;">
									<?= $item['name'] ?>
								</option>
								<? endforeach; ?>
							</select>
							<img id="flagger" src="images/geo_pics/gif/<?= empty($item['country']) ? $item['country'] : 'af' ?>.gif" style="float:right; margin-top: 5px" />
						</h2>

						<h1>Picture </h1><hr class="hr2"/>
						<form enctype="multipart/form-data" action="/AJAX/profile_picture_upload.php" method="post" target="picture">
							<h2 class="in-title">
								<div id="pic-preview" style="display:inline; float:left; margin-right:20px">
									<img src="/user_pics/<?= $pic ?>" />
								</div>
								Change: <input id="pic-uploader" type="file" name="you-pic" value="" style="height: 22px" />
								<div class="error-msg"></div>
							</h2>
							<iframe
								name="picture"
								style="display:none;">
							</iframe>
						</form>

						<p id="profile-btns"><a href="#" id="saveprofile" class="save-btn"></a></p><br />

					</div>
					
					<div id="passchange" class="panel">
						<h1>Change your password</h1><hr class="hr1"/>
						<h2 class="in-title">
							Current password: <input type="password" name="current" maxlength="40" value="" />
							<div class="error-msg"></div>
						</h2>
						<h2 class="in-title">
							New password: <input type="password" name="newpass" maxlength="40" value="" />
							<div class="error-msg"></div>
						</h2>
						<h2 class="in-title">
							Repeat password: <input type="password" name="newpass_repeat" maxlength="40" value="" />
							<div class="error-msg"></div>
						</h2>

						<p id="profile-btns"><a href="#" id="savepassword" class="save-btn"></a></p><br />

					</div>
					
					<p id="gr-create-success" class="input-descr">Loading...</p>
					<div class="clarity"></div>
				</div>
			
			</div>
			
		</div>
		
		<div id="sidebar-right" class="sidebar">
			<div class="section">
				<div class="section-head gray">
					<h1>Help and Tips</h1>
				</div>
				<div class="section-body info">
					<h2>Set your account info correctly.</h2>
					<p>Your account information is not only required, but it's also useful for your friends and contacts to locate you on tap. So make sure to input correct information.</p>
					<h2>Keep your password safe.</h2>
					<p>Weak passwords could easily be sniffed using special tools, so make sure you use stronger passwords. Mix letters and numbers, and add a few symbols from your keyboard.</p>
			</div>
		</div>
		
	</div>
	
	<? include(ANALYTICS); ?>
	
</body>
</html>
